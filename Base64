<!DOCTYPE html>
<html>
<head>
  <title>Convertir Imagen a Base64</title>
</head>
<body>
  <h3>Selecciona o arrastra tu imagen</h3>
  <input type="file" id="fileinput" accept="image/*" />
  <br/><br/>
  <textarea id="base64output" style="width: 100%; height: 150px;"></textarea>

  <script>
    const fileinput = document.getElementById('fileinput');
    const base64output = document.getElementById('base64output');

    fileinput.addEventListener('change', (evt) => {
      const file = evt.target.files[0];
      if (!file) return;

      const reader = new FileReader();
      reader.onload = () => {
        base64output.value = reader.result.split(',')[1]; // solo la parte base64 sin el "data:image/..."
      };
      reader.readAsDataURL(file);
    });

    // Para que App Inventor pueda leer el Base64, lo devolvemos en el título de la página (para usar WebViewer.TitleChanged)
    base64output.addEventListener('input', () => {
      document.title = base64output.value;
    });
  </script>
</body>
</html>
