<!DOCTYPE html>
<html>
<head>
  <title>Convertir imagen</title>
</head>
<body>
  <h3>Selecciona una imagen</h3>
  <input type="file" accept="image/*" id="fileInput" />
  <script>
    const input = document.getElementById("fileInput");
    input.addEventListener("change", function () {
      const file = input.files[0];
      const reader = new FileReader();

      reader.onload = function (e) {
        const base64 = e.target.result.split(',')[1]; // sin el encabezado data:image/...
        // redirigir a la app con el base64 en el URI
        const base64short = encodeURIComponent(base64.substring(0, 500)); // acortar
        location.href = "miapp://imagenbase64?b64=" + base64short;
      };

      if (file) {
        reader.readAsDataURL(file);
      }
    });
  </script>
</body>
</html>
